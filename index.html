<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>10x10 Cat Image Grid with Sort Options</title>
    
    <!-- Google Fonts: Montserrat -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        /* Basic Reset */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Montserrat', sans-serif;
        }

        /* Container for Split-Screen Layout */
        .container {
            display: flex;
            width: 100%;
            height: 100vh;
        }

        /* Sort Dropdown */
        .sort-container {
            width: 100%;
            padding: 20px;
            text-align: center;
        }
        
        .sort-container select {
            padding: 8px 12px;
            font-size: 1rem;
            border-radius: 8px;
            border: 1px solid #ddd;
            outline: none;
        }

        /* Grid Section (Left Half) */
        .grid-container {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 5px;
            width: 50%;
            padding: 20px;
            overflow: auto;
            transition: width 0.3s ease;
        }

        /* Grid Item */
        .grid-item {
            position: relative;
            overflow: hidden;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            height: 120px;
        }

        /* Image Styling */
        .grid-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 12px;
            transition: transform 0.3s ease;
        }

        /* Hover Zoom Effect */
        .grid-item:hover img {
            transform: scale(1.05);
        }

        /* Hover Overlay */
        .grid-item .overlay-text {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
            font-weight: 500;
            padding: 5px;
            opacity: 0;
            border-radius: 12px;
            transition: opacity 0.3s ease;
            text-align: center;
        }

        /* Show overlay on hover */
        .grid-item:hover .overlay-text {
            opacity: 1;
        }

        /* Modal Section (Right Half) */
        .modal {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 50%;
            background-color: #f9f9f9;
            color: black;
            padding: 40px;
            transition: width 0.3s ease;
            box-shadow: -4px 0 10px rgba(0, 0, 0, 0.2);
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            max-width: 500px;
            width: 80%;
            text-align: center;
        }

        .modal-content p {
            font-size: 1.1rem;
            line-height: 1.6;
            color: black;
            margin: 15px 0;
        }

        .modal-info {
            font-size: 0.9rem;
            color: #555;
        }

        /* Close Button */
        .close-button {
            align-self: flex-end;
            font-size: 1.5rem;
            color: black;
            cursor: pointer;
            margin-bottom: 20px;
            transition: color 0.3s;
        }

        .close-button:hover {
            color: #555;
        }
    </style>
</head>
<body>

<div class="sort-container">
    <label for="sort-options">Sort by: </label>
    <select id="sort-options" onchange="fetchData()">
        <option value="id">ID (Ascending)</option>
        <option value="date">Upload Date</option>
        <option value="reverse-id">ID (Descending)</option>
    </select>
</div>

<div class="container">
    <!-- Grid Container -->
    <div id="grid" class="grid-container"></div>

    <!-- Modal Section -->
    <div id="modal" class="modal">
        <span class="close-button" onclick="closeModal()">&times;</span>
        <div class="modal-content">
            <p id="modal-text"></p>
            <div id="modal-info" class="modal-info"></div>
        </div>
    </div>
</div>

<script>
    const CAT_API_KEY = 'live_LQKKqXjCiw23JCnjhzF3vX3RLC2L1CEA9ldkoVpcKOG8W654aI08avEHD2VqfeOo';

    // Fetch data and populate the grid
    async function fetchData() {
        try {
            const sortOption = document.getElementById('sort-options').value;

            // Fetch 100 cat images for a 10x10 grid
            const response = await fetch(`https://api.thecatapi.com/v1/images/search?limit=100&order=${sortOption === 'reverse-id' ? 'desc' : 'asc'}`, {
                headers: {
                    'x-api-key': CAT_API_KEY
                }
            });
            let data = await response.json();

            // Sort data based on the selected option
            if (sortOption === 'id') {
                data.sort((a, b) => a.id - b.id); // Ascending by ID
            } else if (sortOption === 'reverse-id') {
                data.sort((a, b) => b.id - a.id); // Descending by ID
            } else if (sortOption === 'date') {
                data.sort((a, b) => new Date(a.created_at) - new Date(b.created_at)); // Sort by upload date
            }

            renderGrid(data, sortOption);
        } catch (error) {
            console.error("Error fetching data:", error);
        }
    }

    // Render the grid with the sorted data
    function renderGrid(data, sortOption) {
        const grid = document.getElementById('grid');
        grid.innerHTML = ''; // Clear the grid before rendering

        data.forEach(async (item) => {
            const gridItem = document.createElement('div');
            gridItem.classList.add('grid-item');

            const img = document.createElement('img');
            img.src = item.url;
            gridItem.appendChild(img);

            // Determine overlay text based on sorting option
            const overlayText = document.createElement('span');
            overlayText.classList.add('overlay-text');

            if (sortOption === 'date' && item.created_at) {
                overlayText.textContent = `Date: ${new Date(item.created_at).toLocaleDateString()}`;
            } else {
                overlayText.textContent = `ID: ${item.id}`;
            }
            
            gridItem.appendChild(overlayText);

            // Fetch a random cat fact for each image
            const factResponse = await fetch('https://catfact.ninja/fact');
            const factData = await factResponse.json();
            const catFact = factData.fact;

            // Add click event to show the modal with cat fact, ID, and date
            gridItem.addEventListener('click', () => {
                showModal(catFact, item.id, item.created_at);
            });

            grid.appendChild(gridItem);
        });
    }

    // Show the modal with the given text, ID, and upload date
    function showModal(text, id, date) {
        const modal = document.getElementById('modal');
        const modalText = document.getElementById('modal-text');
        const modalInfo = document.getElementById('modal-info');
        const grid = document.getElementById('grid');

        modalText.textContent = text;
        modalInfo.innerHTML = `ID: ${id} <br> Upload Date: ${date ? new Date(date).toLocaleDateString() : 'N/A'}`;
        
        modal.classList.add('show');
        grid.style.width = '50%';
    }

    // Close the modal and reset layout
    function closeModal() {
        const modal = document.getElementById('modal');
        const grid = document.getElementById('grid');

        modal.classList.remove('show');
        grid.style.width = '100%';
    }

    // Initial fetch and render of the data
    fetchData();

    // Show modal window on page load
    window.onload = () => {
        showModal('Select a Person', 'N/A', null);
    };
</script>

  </body>
